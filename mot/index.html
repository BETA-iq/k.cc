<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ØªØ³Øª Ù…Ø·Ø§Ø¹Ù…</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
:root {
    --main: #ef5f5f;
    --accent: #9d0000;
    --bg: #3b0b0b;
    --text: rgb(73 59 59 / 94%);
    --muted: #9d0000;
    --glass-bg: rgb(26 26 26 / 45%);
    --card-radius: 14px;
    --shadow: 0 14px 40px rgba(16, 24, 40, 0.06);
    --glass-border: rgb(157 91 91 / 45%);
    --glass-blur: 10px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:"Cairo",sans-serif;background:linear-gradient(180deg,var(--bg),#fbf8ff);color:var(--text);-webkit-font-smoothing:antialiased}
.app{max-width:1200px;margin:28px auto;padding:18px;display:grid;grid-template-columns:360px 1fr;gap:22px;align-items:start}
.header{display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.85));border:1px solid rgba(0,0,0,0.04);box-shadow:var(--shadow)}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:87px;height:62px;border-radius:16px;background:linear-gradient(135deg,var(--accent),var(--main));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:22px}
.brand h1{margin:0;font-size:18px}
.controls{display:flex;gap:8px;align-items:center}
.menu-btn{display:none;padding:8px 12px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),var(--main));color:#fff;font-weight:700}
.container{display:contents}
.sidebar{background:linear-gradient(180deg,rgba(255,255,255,0.94),rgba(255,255,255,0.9));border-radius:var(--card-radius);padding:18px;backdrop-filter: blur(var(--glass-blur));border:1px solid var(--glass-border);box-shadow:var(--shadow)}
.brand-compact{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.categories{display:flex;flex-direction:column;gap:8px;margin-top:10px}
.cat{padding:12px;border-radius:10px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;border:1px solid transparent;transition:all .18s}
.cat:hover{transform:translateX(-6px)}
.cat.active{background:linear-gradient(90deg,rgba(139,92,246,0.12),rgba(139,92,246,0.06));border-color:rgba(139,92,246,0.18)}
.order{margin-top:16px;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.82));border:1px solid var(--glass-border)}
.order h3{margin:0 0 10px 0}
.items{max-height:199px;overflow:auto;padding-right:6px}
.order-item{display:flex;justify-content:space-between;gap:8px;padding:10px 6px;border-bottom:1px dashed rgba(15,23,42,0.04);align-items:center}
.order-total{display:flex;justify-content:space-between;margin-top:12px;font-weight:800}
.btn{display:inline-block;padding:10px 14px;border-radius:10px;text-decoration:none;border:none;cursor:pointer}
.btn-primary{background:linear-gradient(137deg, var(--accent), #693939);color:#fff;box-shadow:0 12px 30px rgba(107,33,168,0.12);font-weight:700}
.main{min-height:78vh;padding:20px;border-radius:var(--card-radius);background:linear-gradient(180deg,rgba(255,255,255,0.94),rgba(255,255,255,0.9));border:1px solid var(--glass-border);backdrop-filter: blur(var(--glass-blur));box-shadow:var(--shadow)}
.toolbar{display:flex;flex-wrap:wrap;gap:12px;justify-content:space-between;align-items:center;margin-bottom:18px}
.search{flex:1;display:flex;align-items:center;gap:8px}
.search input{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(15,23,42,0.06);outline:none}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
.card{animation-delay: var(--delay, 0s);opacity: 0;animation: slideUpFade 0.5s forwards;border-radius:12px;padding:14px;border:1px solid rgba(0,0,0,0.04);box-shadow:0 10px 30px rgba(16,24,40,0.04);position:relative;overflow:hidden;cursor:pointer;transition:transform .22s,box-shadow .22s}
.card:hover{animation-delay: var(--delay, 0s);opacity: 0;animation: slideUpFade 0.5s forwards;transform:translateY(-8px);box-shadow:0 26px 46px rgba(107,33,168,0.08)}
.thumb{
    width:100%;height:140px;border-radius:10px;
    background:linear-gradient(120deg,rgba(139,92,246,0.06),rgba(139,92,246,0.02));
    display:flex;align-items:center;
    justify-content:center;
    font-weight:800;color:var(#f7f4f4);
    font-size:16px}
.card h4{animation-delay: var(--delay, 0s);opacity: 0;animation: slideUpFade 0.5s forwards;margin:10px 0 6px 0}
.card p{animation-delay: var(--delay, 0s);opacity: 0;animation: slideUpFade 0.5s forwards;margin:0;color:var(--muted);font-size:13px}
.price{position:absolute;top:12px;left:12px;background:rgba(255,255,255,0.95);padding:6px 10px;border-radius:10px;font-weight:800;border:1px solid rgba(107,33,168,0.06)}
.ribbon{position:absolute;right:-36px;top:12px;transform:rotate(45deg);background:linear-gradient(90deg,var(--accent),var(--main));color:#fff;padding:6px 46px;font-weight:800}
/*.card-actions{display:flex;justify-content:space-between;align-items:center;margin-top:12px}*/
.card-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
  opacity: 0;
  animation: slideUpFade 0.5s forwards;
  transform-origin: bottom;
}

.btn-ghost{padding:8px 10px;border-radius:10px;/*border:1px dashed rgba(107,33,168,0.18);*/background:transparent}
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:18px;visibility:hidden;opacity:0;transition:all .22s;z-index:60}
.modal.open{visibility:visible;opacity:1}
.sheet{width:720px;max-width:96%;background:#fff;border-radius:12px;padding:18px;border:1px solid rgba(0,0,0,0.04);box-shadow:0 30px 60px rgba(16,24,40,0.08);transform:translateY(20px);transition:transform .22s}
.modal.open .sheet{transform:translateY(0)}
.form-row{display:flex;gap:8px;flex-wrap:wrap}
.form-group{display:flex;flex-direction:column;gap:6px;flex:1}
.input,textarea{padding:10px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);outline:none}
textarea{resize:vertical;min-height:80px,max-width: 80%;}
.footer-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.bg-glow{position:fixed;left:50%;top:8%;width:520px;height:280px;border-radius:48%;transform:translateX(-50%);filter:blur(48px);opacity:0.12;background:radial-gradient(circle at 30% 30%,var(--accent),transparent 20%),radial-gradient(circle at 70% 70%,var(--main),transparent 30%);pointer-events:none;z-index:0}
.sidebar-slide{position:fixed;inset:0;display:none;z-index:80}
.sidebar-panel{position:fixed;right:0;top:0;height:100%;width:320px;background:linear-gradient(180deg,rgba(255,255,255,0.96),rgba(255,255,255,0.92));box-shadow: -20px 0 40px rgba(16,24,40,0.12);padding:18px;transform:translateX(100%);transition:transform .28s}
.sidebar-panel.open{transform:translateX(0)}
.close-side{display:flex;justify-content:flex-end}
.cart-item-controls{display:flex;gap:6px;align-items:center}
.qty-input{width:62px;padding:6px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);text-align:center}
.note-btn{background:transparent;border:1px dashed rgba(107,33,168,0.12);padding:6px 8px;border-radius:8px;font-size:13px}
.remove-btn{background:transparent;border:1px solid rgba(220,38,38,0.08);padding:6px 8px;border-radius:8px;color:#b91c1c}
.cart-toggle{padding:8px 10px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);cursor:pointer;display:flex;align-items:center;gap:8px;background:transparent}
.cart-badge{background:#ff4d6d;color:#fff;border-radius:50%;min-width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;font-weight:800;padding:0 6px;font-size:13px}
.dark{--bg:#0f1724;--text:#f3f4f6;--muted:#9aa6b2;--glass-bg: rgba(255,255,255,0.03);--glass-border: rgba(255,255,255,0.06)}
.form-row-1 {
  display: flex;
  gap: 5px;
}
.form-group-1 {
  flex: 1;
  max-width: 80%;
}
.logo-1 {
  width: 80px;height: 80px;
  background-image: url('https://cdn.discordapp.com/attachments/1436276906772271146/1436321597102489711/aboud.rest_14040817_144858815.jpg');
  background-size: cover;
  background-position: center;
  border-radius: 50%;
}

.menu-item {
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.5s ease-out;
}

.menu-item.show {
  opacity: 1;
  transform: translateY(0);
}
@keyframes slideUpFade {
  0% {
    opacity: 0;
    transform: translateY(40px) scale(0.95) rotateX(8deg);
    filter: blur(4px);
  }
  25% {
    opacity: 0.5;
    transform: translateY(25px) scale(0.97) rotateX(4deg);
    filter: blur(2px);
  }
  50% {
    opacity: 0.8;
    transform: translateY(10px) scale(1.02) rotateX(0deg);
    filter: blur(1px);
  }
  70% {
    opacity: 1;
    transform: translateY(-4px) scale(1);
    filter: blur(0);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}
@media (max-width: 480px) {
  .cart-modal,
  .cart-modal .modal-content {
    width: 95% !important;
    max-width: 380px;
    max-height: 90vh;
    padding: 10px 15px;
    border-radius: 12px;
  }
  .cart-items {
    max-height: 40vh;
    overflow-y: auto;
  }
  .checkout-form input,
  .checkout-form button {
    font-size: 14px;
    padding: 8px;
  }

  .cart-header h2 {
    font-size: 18px;
  }
}

@media(max-width:900px){
  .app{margin:12px auto;padding:8px;grid-template-columns:1fr}
  .header{display:flex;margin-bottom:12px}
  .sidebar{display:none}
  .menu-btn{display:inline-block}
  .sidebar-slide{display:block}
  .sheet{width:96%}
  .grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
}
</style>
</head>
<body>
<div class="bg-glow" aria-hidden></div>
<div class="header" aria-hidden>
  <div class="brand">
    <div class="logo">ØªÙŠØ³Øª</div>
    <div>
      <h1>Ø§Ø¯Ø±ÙŠØ³ - ØªØ³Øª</h1>
      <div style="font-size:13px;color:var(--muted)">Ù…ÙŠÙ†ÙŠÙˆ Ø·Ø¹Ø§Ù…</div>
    </div>
  </div>
  <div class="controls">
    <button class="menu-btn btn-primary" id="openSide">â˜° Ø§Ù„Ù‚Ø§Ø¦Ù…Ù‡</button>
    <button id="cartBtn" class="cart-toggle" title="Ø§Ù„Ø³Ù„Ø©">
      <span style="font-size:18px">ğŸ›’</span>
      <span id="cartCount" class="cart-badge">0</span>
    </button>
  </div>
</div>
<div class="app">
  <div class="sidebar" id="desktopSidebar">
    <div class="brand-compact">
      <div class="logo">ØªÙŠØ³Øª</div>

      <div>
        <h1>Ø§Ø¯Ø±ÙŠØ³ - Ø§Ø®ØªØ¨Ø§Ø±</h1>
        <div style="font-size:13px;color:var(--muted)">Ù‚Ø§Ø¦Ù…Ø© Ù…ÙŠÙ†ÙŠÙˆ</div>
      </div>
    </div>
    <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
      <div style="font-weight:700">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
      <div>
        <button id="cartBtnSide" class="cart-toggle">ğŸ›’ <span id="cartCountSide" class="cart-badge">0</span></button>
      </div>
    </div>
    <div class="categories" id="cats"></div>
    <div class="order" aria-live="polite">
      <h3>Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ (Ø¹Ø±Ø¶ Ø³Ø±ÙŠØ¹)</h3>
      <div class="items" id="orderItems"><p style="color:var(--muted);font-size:13px">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© - Ø£Ø¶Ù Ø£Ø·Ø¨Ø§Ù‚Ø§Ù‹ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ†</p></div>
      <div class="order-total"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</span><span id="total">0 IQD</span></div>
      <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
        <button class="btn btn-primary" id="openCheckoutFromSidebar">ÙØªØ­ Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„Ø·Ù„Ø¨</button>
      </div>
    </div>
  </div>
  <main class="main" role="main">
    <div class="toolbar">
      <div class="search"><input id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø¨Ù‚ Ø£Ùˆ Ù…ÙƒÙˆÙ‘Ù†..." /></div>
      <div style="display:flex;gap:8px;align-items:center">
        <button class="btn btn-primary" id="demoMood">Ø§Ø¯Ø±ÙŠØ³</button>
      </div>
    </div>
    <section class="grid" id="grid"></section>
  </main>
</div>
<div class="sidebar-slide" id="sidebarSlide">
  <div class="sidebar-panel" id="panel">
    <div class="close-side"><button class="btn btn-ghost" id="closeSide">Ø¥ØºÙ„Ø§Ù‚ âœ•</button></div>
    <h3 style="margin-top:6px">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h3>
    <div class="categories" id="catsMobile" style="margin-top:8px"></div>
  </div>
</div>
<div class="modal" id="checkoutModal" aria-hidden="true">
  <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="checkoutTitle">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <<h3 id="checkoutTitle">Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
      <button id="closeCheckout" class="btn-ghost">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
    <div style="display:flex;gap:16px;flex-wrap:wrap">
      <div style="flex:1;min-width:260px">
        <div id="checkoutList" style="max-height:199px;overflow:auto;padding-right:6px;border-radius:8px;border:1px solid rgba(15,23,42,0.04);padding:8px;background:linear-gradient(180deg,rgba(255,255,255,0.98),rgba(255,255,255,0.95))">
          <p style="color:var(--muted);font-size:13px">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© - Ø£Ø¶Ù Ø£Ø·Ø¨Ø§Ù‚Ø§Ù‹ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ†</p>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
          <strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ</strong>
          <strong id="checkoutTotal">0 IQD</strong>
        </div>
      </div>
      <div style="width:320px;min-width:260px">
        <form id="checkoutForm">
          <div class="form-row" style="flex-direction:column">
            <div class="form-row-1">
              <div class="form-group-1">
                <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                <input type="text" id="custName" class="input" required="" style="max-width: 140px;"> 
              </div>
              <div class="form-group-1">
                <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                <input type="tel" id="custPhone" class="input" placeholder="Ù…Ø«Ø§Ù„: 07718009200 " required="" style="max-width: 140px;">
              </div>
            </div>
            <div class="form-group"><label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„</label><textarea id="custAddress" class="input" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ù…Ù†ØµÙˆØ± Ø¨ØºØ¯Ø§Ø¯" required=""></textarea></div>
            <div class="form-group"><label>Ù…Ù„Ø§Ø­Ø¸Ø© Ø¹Ø§Ù…Ø© Ù„Ù„Ø·Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label><textarea id="orderNote" class="input" placeholder="Ù…Ø«Ø§Ù„: Ù„Ø§ ØªØ¶Ø¹ Ø¨ØµÙ„"></textarea></div>
          </div>
          <div class="footer-actions" style="margin-top:10px">
            <button type="button" class="btn-ghost" id="cancelCheckout">Ø¥Ù„ØºØ§Ø¡</button>
            <button type="submit" class="btn btn-primary">send</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<div class="modal" id="noteModal" aria-hidden="true">
  <div class="sheet" style="width:520px;max-width:96%">
    <h3 id="noteTitle">Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„ØµÙ†Ù</h3>
    <div style="margin-top:8px">
      <textarea id="noteInput" class="input" placeholder="Ø£Ø¶Ù Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„ØµÙ†Ù"></textarea>
    </div>
    <div class="footer-actions">
      <button id="cancelNote" class="btn-ghost">Ø¥Ù„ØºØ§Ø¡</button>
      <button id="saveNote" class="btn btn-primary">Ø­ÙØ¸</button>
    </div>
  </div>
</div>
    
<div class="modal" id="noteModal" aria-hidden="true">
  <div class="sheet" style="width:520px;max-width:96%">
    <textarea id="noteInput" class="input" placeholder="Ø£Ø¶Ù Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„ØµÙ†Ù"></textarea>
    <div class="footer-actions" style="margin-top:8px;display:flex;justify-content:flex-end;gap:8px">
      <button id="cancelNote" class="btn-ghost">Ø¥Ù„ØºØ§Ø¡</button>
      <button id="saveNote" class="btn btn-primary">Ø­ÙØ¸</button>
    </div>
  </div>
</div>

<script>
const DATA = {
  categories: [
    'Ø§Ù„Ø¹Ø±ÙˆØ¶',
    'Ø§Ù„Ù‡ÙˆØ§ØªÙ',
    'Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ',
    'ÙƒÙØ±Ø§Øª ÙˆØ­Ù…Ø§ÙŠÙ‡',
    'Ø´ÙˆØ§Ø­Ù†',
    'Ø³Ø§Ø¹Ø§Øª'
  ],
  products: [
    { id: 1, name: 'Ø¹Ø±Ø¶ Ù‡Ø§ØªÙ + ÙƒÙØ± + Ø³Ù…Ø§Ø¹Ø©', cat: 'Ø§Ù„Ø¹Ø±ÙˆØ¶', desc: 'Ø­Ø²Ù…Ø© ØªÙˆÙÙŠØ± Ø´Ø§Ù…Ù„Ø© Ø¨Ø³Ø¹Ø± Ù…Ù…ÙŠØ²', price: 980000, tag: 'Ø¹Ø±Ø¶ Ù…Ø­Ø¯ÙˆØ¯' },
    { id: 2, name: 'Ø¹Ø±Ø¶ Ø´Ø§Ø­Ù† + ÙƒØ§Ø¨Ù„ Ø³Ø±ÙŠØ¹', cat: 'Ø§Ù„Ø¹Ø±ÙˆØ¶', desc: 'Ø´Ø­Ù† Ø³Ø±ÙŠØ¹ Ù…Ø¹ ÙƒØ§Ø¨Ù„ USB-C', price: 35000, tag: 'Ø¹Ø±Ø¶' },
    { id: 3, name: 'Ø¹Ø±Ø¶ Ø³Ù…Ø§Ø¹Ø© + ÙƒÙØ±', cat: 'Ø§Ù„Ø¹Ø±ÙˆØ¶', desc: 'Ø³Ù…Ø§Ø¹Ø© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø© Ù…Ø¹ ÙƒÙØ± Ø­Ù…Ø§ÙŠØ©', price: 50000, tag: 'Ù…Ù…ÙŠØ²' },

    { id: 4, name: 'iPhone 16 pro max', cat: 'Ø§Ù„Ù‡ÙˆØ§ØªÙ', desc: 'Ø´Ø§Ø´Ø© Super Retina XDRØŒ ÙƒØ§Ù…ÙŠØ±Ø§ Ø«Ù„Ø§Ø«ÙŠØ©ØŒ Ø£Ø¯Ø§Ø¡ Ø¹Ø§Ù„ÙŠ', price: 1350000, tag: 'Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹' },
    { id: 5, name: 'Samsung Galaxy S24 Ultra', cat: 'Ø§Ù„Ù‡ÙˆØ§ØªÙ', desc: 'ÙƒØ§Ù…ÙŠØ±Ø§ 200 Ù…ÙŠØ¬Ø§Ø¨ÙŠÙƒØ³Ù„ØŒ Ø¯Ø¹Ù… Ù‚Ù„Ù… S-Pen', price: 1250000, tag: 'Ø¬Ø¯ÙŠØ¯' },
    { id: 6, name: 'Redmi Note 13 Pro', cat: 'Ø§Ù„Ù‡ÙˆØ§ØªÙ', desc: 'Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø² ÙˆØ³Ø¹Ø± Ø§Ù‚ØªØµØ§Ø¯ÙŠ', price: 480000, tag: 'Ø§Ù‚ØªØµØ§Ø¯ÙŠ' },

    { id: 7, name: 'Ø­Ø§Ù…Ù„ Ø¬ÙˆØ§Ù„ Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ', cat: 'Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ', desc: 'Ø¯ÙˆØ±Ø§Ù† 360Â°ØŒ ØªØ«Ø¨ÙŠØª Ù‚ÙˆÙŠØŒ ØªØµÙ…ÙŠÙ… Ø£Ù†ÙŠÙ‚', price: 18000, tag: 'Ø¹Ù…Ù„ÙŠ' },
    { id: 8, name: 'Ù…Ù†Ø¸Ù Ø´Ø§Ø´Ø© Ø°ÙƒÙŠ', cat: 'Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ', desc: 'Ø¨Ø®Ø§Ø® ØªÙ†Ø¸ÙŠÙ Ù…Ø¯Ù…Ø¬ Ù…Ø¹ Ù‚Ø·Ø¹Ø© Ù‚Ù…Ø§Ø´', price: 7000, tag: 'Ù…ÙÙŠØ¯' },
    { id: 9, name: 'Ø³Ù…Ø§Ø¹Ø© Ø¨Ù„ÙˆØªÙˆØ« ØµØºÙŠØ±Ø©', cat: 'Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ', desc: 'ØµÙˆØª Ù†Ù‚ÙŠ ÙˆØ±Ø§Ø­Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…', price: 45000, tag: 'Ù…Ù…ÙŠØ²' },

    { id: 10, name: 'ÙƒÙØ± Ø­Ù…Ø§ÙŠØ© Ø´ÙØ§Ù iPhone 16 pro max', cat: 'ÙƒÙØ±Ø§Øª ÙˆØ­Ù…Ø§ÙŠÙ‡', desc: 'Ù…Ø¶Ø§Ø¯ Ù„Ù„ØµØ¯Ù…Ø§ØªØŒ Ø®Ø§Ù…Ø© TPU Ø´ÙØ§ÙØ©', price: 15000, tag: 'Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹' },
    { id: 11, name: 'ÙƒÙØ± Ø³ÙŠÙ„ÙŠÙƒÙˆÙ† Galaxy S24', cat: 'ÙƒÙØ±Ø§Øª ÙˆØ­Ù…Ø§ÙŠÙ‡', desc: 'Ù…Ù„Ù…Ø³ Ù†Ø§Ø¹Ù…ØŒ Ø­Ù…Ø§ÙŠØ© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø¬Ù‡Ø§Ø²', price: 12000, tag: 'Ø¬Ø¯ÙŠØ¯' },
    { id: 12, name: 'Ø²Ø¬Ø§Ø¬ Ø­Ù…Ø§ÙŠØ© 9H', cat: 'ÙƒÙØ±Ø§Øª ÙˆØ­Ù…Ø§ÙŠÙ‡', desc: 'Ù…Ø¶Ø§Ø¯ Ù„Ù„Ø®Ø¯ÙˆØ´ØŒ Ø´ÙØ§Ù Ø¨Ø§Ù„ÙƒØ§Ù…Ù„', price: 8000, tag: 'Ø£Ø³Ø§Ø³ÙŠ' },

    { id: 13, name: 'Ø´Ø§Ø­Ù† Ø³Ø±ÙŠØ¹ 25 ÙˆØ§Ø· Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬', cat: 'Ø´ÙˆØ§Ø­Ù†', desc: 'ÙŠØ¯Ø¹Ù… Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø³Ø±ÙŠØ¹ PDØŒ ÙƒÙŠØ¨Ù„ Type-C', price: 25000, tag: 'Ø³Ø±ÙŠØ¹' },
    { id: 14, name: 'ÙƒÙŠØ¨Ù„ Ø´Ø­Ù† Type-C Ø£ØµÙ„ÙŠ', cat: 'Ø´ÙˆØ§Ø­Ù†', desc: 'Ø·ÙˆÙ„ 1 Ù…ØªØ±ØŒ Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©ØŒ Ù…ØªÙŠÙ†', price: 9000, tag: 'Ù…Ø¶Ù…ÙˆÙ†' },
    { id: 15, name: 'Ø¨Ø§ÙˆØ± Ø¨Ø§Ù†Ùƒ 20000mAh Ù…Ù† Anker', cat: 'Ø´ÙˆØ§Ø­Ù†', desc: 'Ø´Ø­Ù† Ø³Ø±ÙŠØ¹ PDØŒ Ù…Ø¯Ø®Ù„ÙŠÙ† USB-C', price: 39000, tag: 'Ù…Ø¶Ù…ÙˆÙ†' },

    { id: 16, name: 'Apple Watch Series 11', cat: 'Ø³Ø§Ø¹Ø§Øª', desc: 'Ø´Ø§Ø´Ø© Always-On RetinaØŒ ØªØªØ¨Ø¹ ØµØ­ÙŠ Ù…ØªÙƒØ§Ù…Ù„', price: 490000, tag: 'Ø±Ø§Ù‚ÙŠ' },
    { id: 17, name: 'Galaxy Watch 6 Classic', cat: 'Ø³Ø§Ø¹Ø§Øª', desc: 'ØªØµÙ…ÙŠÙ… Ù…Ø¹Ø¯Ù†ÙŠ Ø£Ù†ÙŠÙ‚ØŒ Ø¨Ø·Ø§Ø±ÙŠØ© ØªØ¯ÙˆÙ… Ø·ÙˆÙŠÙ„Ø§Ù‹', price: 420000, tag: 'ÙØ§Ø®Ø±' },
    { id: 18, name: 'Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ© Amazfit GTS 4', cat: 'Ø³Ø§Ø¹Ø§Øª', desc: 'Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù†ÙˆÙ… ÙˆØ§Ù„Ø±ÙŠØ§Ø¶Ø©ØŒ Ù…Ù‚Ø§ÙˆÙ…Ø© Ù„Ù„Ù…Ø§Ø¡', price: 130000, tag: 'Ù…Ù…ÙŠØ²' }
  ]
}

let order=[]
const catsEl=document.getElementById('cats')
const catsMobileEl=document.getElementById('catsMobile')
const grid=document.getElementById('grid')
const orderItemsContainer=document.getElementById('orderItems')
const cartCount=document.getElementById('cartCount')
const cartCountSide=document.getElementById('cartCountSide')
const checkoutList=document.getElementById('checkoutList')
const checkoutTotalEl=document.getElementById('checkoutTotal')
const checkoutModal=document.getElementById('checkoutModal')
const closeCheckout=document.getElementById('closeCheckout')
const cartBtn=document.getElementById('cartBtn')
const cartBtnSide=document.getElementById('cartBtnSide')
const openCheckoutFromSidebar=document.getElementById('openCheckoutFromSidebar')
const noteModal=document.getElementById('noteModal')
const noteInput=document.getElementById('noteInput')
const noteTitle=document.getElementById('noteTitle')
let noteTargetId=null

DATA.categories.forEach((c,i)=>{
  const el=document.createElement('div')
  el.className='cat'+(i===0?' active':'')
  el.innerHTML=`<span>${c}</span><span style='opacity:.6;font-size:12px'>${DATA.dishes.filter(d=>d.cat===c).length}</span>`
  el.onclick=()=>{document.querySelectorAll('#cats .cat').forEach(x=>x.classList.remove('active'));el.classList.add('active');renderGrid(c);closeSidebar()}
  catsEl.appendChild(el)
  const el2=el.cloneNode(true)
  el2.onclick=()=>{document.querySelectorAll('#catsMobile .cat').forEach(x=>x.classList.remove('active'));el2.classList.add('active');renderGrid(c);closeSidebar()}
  catsMobileEl.appendChild(el2)
})
function renderGrid(filter){
  grid.innerHTML=''
  const items=DATA.dishes.filter(d=>!filter||d.cat===filter)
  items.forEach(d=>{
    const card=document.createElement('article')
    card.className='card'
    card.setAttribute('data-id',d.id)
    card.innerHTML=`
      <div class="price">${d.price.toLocaleString()} IQD</div>
      <div class="thumb">${d.name.split(' ').slice(0,3).join(' ')}</div>
      <h4>${d.name}</h4>
      <p>${d.desc}</p>
      <div class='card-actions'><small style='color:var(--muted)'>${d.tag}</small>
        <div>
          <button class='btn-ghost' onclick='openModal(${d.id}, event)'>Ø¹Ø±Ø¶</button>
          <button class='btn-ghost' onclick='addToOrder(${d.id}, event)'>Ø£Ø¶Ù</button>
        </div>
      </div>
      <div class='ribbon' style='display:${d.tag?"block":"none"}'>${d.tag}</div>`
    grid.appendChild(card)
  })
}
renderGrid(DATA.categories[0])
document.getElementById('search').addEventListener('input',e=>{
  const q=e.target.value.trim()
  if(!q) return renderGrid(document.querySelector('#cats .cat.active').innerText)
  grid.innerHTML=''
  const res=DATA.dishes.filter(d=>(d.name + ' ' + d.desc).toLowerCase().includes(q.toLowerCase()))
  res.forEach(d=>{
    const card=document.createElement('article');card.className='card'
    card.innerHTML=`<div class="price">${d.price.toLocaleString()} IQD</div><div class="thumb">${d.name.split(' ').slice(0,3).join(' ')}</div><h4>${d.name}</h4><p>${d.desc}</p><div class='card-actions'><small style='color:var(--muted)'>${d.tag}</small><div><button class='btn-ghost' onclick='openModal(${d.id}, event)'>Ø¹Ø±Ø¶</button> <button class='btn-ghost' onclick='addToOrder(${d.id}, event)'>Ø£Ø¶Ù</button></div></div><div class='ribbon'>${d.tag}</div>`
    grid.appendChild(card)
  })
})
const modal=document.getElementById('modal')
let currentModalId=null
function openModal(id,e){ if(e) e.stopPropagation(); const dish=DATA.dishes.find(x=>x.id===id); currentModalId=id; 
  const html = `
    <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
      <div style="width:140px;height:120px;border-radius:10px;background:linear-gradient(120deg,rgba(139,92,246,0.06),rgba(139,92,246,0.02));display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--main)">
        ${dish.name.split(' ').slice(0,3).join(' ')}
      </div>
      <div style="flex:1">
        <p style="margin:0 0 6px 0;color:var(--muted)">${dish.desc}</p>
        <p style="margin:0;font-weight:800">Ø§Ù„Ø³Ø¹Ø±: ${dish.price.toLocaleString()} IQD</p>
        <p style="margin:8px 0 0 0;font-size:13px;color:var(--muted)">Ø§Ø¶ØºØ· "Ø£Ø¶Ù" Ù„Ø¥Ø¶Ø§ÙØªÙ‡ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø³Ù„Ø©</p>
      </div>
    </div>`
  if(confirm(`${dish.name}\n\n${dish.desc}\n\nØ§Ù„Ø³Ø¹Ø±: ${dish.price.toLocaleString()} IQD\n\nÙ‡Ù„ ØªÙˆØ¯ Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ø§ Ø§Ù„Ø·Ø¨Ù‚ Ù„Ù„Ø³Ù„Ø©ØŸ`)){
    addToOrder(id)
  }
}
function addToOrder(id,e){
  if(e) e.stopPropagation()
  const dish=DATA.dishes.find(x=>x.id===id)
  const existing=order.find(o=>o.id===id)
  if(existing){ existing.qty++ } else { order.push({id:dish.id,name:dish.name,price:dish.price,qty:1,note:''}) }
  renderOrder()
  animateCard(id)
}
function animateCard(id){
  const card=document.querySelector(`.card[data-id='${id}']`)
  if(card){ card.animate([{transform:'scale(1)'},{transform:'scale(1.04)'},{transform:'scale(1)'}],{duration:260}) }
}
function renderOrder(){
  const container=orderItemsContainer
  container.innerHTML=''
  if(order.length===0){
    container.innerHTML=`<p style="color:var(--muted);font-size:13px">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© - Ø£Ø¶Ù Ø£Ø·Ø¨Ø§Ù‚Ø§Ù‹ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ†</p>`
    document.getElementById('total').innerText='0 IQD'
  } else {
    let total=0
    order.forEach(o=>{
      total+=o.price*o.qty
      const el=document.createElement('div'); el.className='order-item'
      el.innerHTML=`<div style="display:flex;flex-direction:column"><strong>${o.name}</strong><div style="font-size:13px;color:var(--muted)">x${o.qty}</div></div><div style="text-align:left;min-width:120px"><div>${(o.price*o.qty).toLocaleString()} IQD</div></div>`
      container.appendChild(el)
    })
    document.getElementById('total').innerText=total.toLocaleString()+' IQD'
  }
  checkoutList.innerHTML=''
  if(order.length===0){
    checkoutList.innerHTML=`<p style="color:var(--muted);font-size:13px">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© - Ø£Ø¶Ù Ø£Ø·Ø¨Ø§Ù‚Ø§Ù‹ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ†</p>`
    checkoutTotalEl.innerText='0 IQD'
  } else {
    let total=0
    order.forEach(o=>{
      total+=o.price*o.qty
      const wrapper=document.createElement('div')
      wrapper.style.display='flex'
      wrapper.style.justifyContent='space-between'
      wrapper.style.padding='8px 0'
      wrapper.style.borderBottom='1px dashed rgba(15,23,42,0.04)'
      const left=document.createElement('div'); left.style.display='flex'; left.style.flexDirection='column'
      const title=document.createElement('strong'); title.innerText=o.name
      const noteText=document.createElement('div'); noteText.style.fontSize='13px'; noteText.style.color='var(--muted)'; noteText.innerText=o.note?`Ù…Ù„Ø§Ø­Ø¸Ø©: ${o.note}`:''
      const qtyControls=document.createElement('div'); qtyControls.className='cart-item-controls'
      const minus=document.createElement('button'); minus.className='btn-ghost'; minus.innerText='-'; minus.onclick=()=>{decreaseQty(o.id)}
      const input=document.createElement('input'); input.className='qty-input'; input.type='number'; input.min=1; input.value=o.qty; input.onchange=(e)=>{setQty(o.id,parseInt(e.target.value)||1)}
      const plus=document.createElement('button'); plus.className='btn-ghost'; plus.innerText='+'; plus.onclick=()=>{increaseQty(o.id)}
      qtyControls.appendChild(minus); qtyControls.appendChild(input); qtyControls.appendChild(plus)
      left.appendChild(title); left.appendChild(noteText); left.appendChild(qtyControls)
      const right=document.createElement('div'); right.style.textAlign='left'; right.style.minWidth='140px'
      const priceLine=document.createElement('div'); priceLine.innerText=(o.price*o.qty).toLocaleString()+' IQD'
      const actions=document.createElement('div'); actions.style.marginTop='8px'
      const noteBtn=document.createElement('button'); noteBtn.className='note-btn'; noteBtn.innerText='Ù…Ù„Ø§Ø­Ø¸Ø©'; noteBtn.onclick=()=>{openNoteModal(o.id)}
      const removeBtn=document.createElement('button'); removeBtn.className='remove-btn'; removeBtn.innerText='Ø­Ø°Ù'; removeBtn.onclick=()=>{removeItem(o.id)}
      actions.appendChild(noteBtn); actions.appendChild(removeBtn)
      right.appendChild(priceLine); right.appendChild(actions)

      wrapper.appendChild(left); wrapper.appendChild(right)
      checkoutList.appendChild(wrapper)
    })
    checkoutTotalEl.innerText=total.toLocaleString()+' IQD'
  }
  const count = order.reduce((s,o)=>s+o.qty,0)
  cartCount.innerText = count
  cartCountSide.innerText = count
  saveOrderToStorage()
}
function increaseQty(id){ const i=order.find(o=>o.id===id); if(i){ i.qty++; renderOrder() } }
function decreaseQty(id){ const i=order.find(o=>o.id===id); if(i){ i.qty--; if(i.qty<=0){ order.splice(order.indexOf(i),1) } renderOrder() } }
function setQty(id,val){ if(val<1) val=1; const i=order.find(o=>o.id===id); if(i){ i.qty=val; renderOrder() } }
function removeItem(id){ const i=order.find(o=>o.id===id); if(i){ order.splice(order.indexOf(i),1); renderOrder() } }
function openNoteModal(id){ noteTargetId=id; const it=order.find(o=>o.id===id); noteInput.value=it?it.note:''; noteTitle.innerText=`Ù…Ù„Ø§Ø­Ø¸Ø©: ${it?it.name:''}`; noteModal.classList.add('open') }
document.getElementById('cancelNote').addEventListener('click',()=>{ noteModal.classList.remove('open'); noteTargetId=null })
document.getElementById('saveNote').addEventListener('click',()=>{
  if(noteTargetId===null){ noteModal.classList.remove('open'); return }
  const it=order.find(o=>o.id===noteTargetId); if(it){ it.note=noteInput.value.trim(); renderOrder() }
  noteModal.classList.remove('open'); noteTargetId=null
})

cartBtn.addEventListener('click', openCheckoutModal)
cartBtnSide.addEventListener('click', openCheckoutModal)
openCheckoutFromSidebar.addEventListener('click', openCheckoutModal)
closeCheckout.addEventListener('click', ()=>{ checkoutModal.classList.remove('open'); checkoutModal.setAttribute('aria-hidden','true') })
document.getElementById('cancelCheckout').addEventListener('click', ()=>{ checkoutModal.classList.remove('open'); checkoutModal.setAttribute('aria-hidden','true') })
function openCheckoutModal(){
  renderOrder()
  checkoutModal.classList.add('open')
  checkoutModal.setAttribute('aria-hidden','false')}
const sidebarSlide=document.getElementById('sidebarSlide'),panel=document.getElementById('panel')
document.getElementById('openSide').addEventListener('click',()=>{ panel.classList.add('open'); sidebarSlide.style.display='block' })
document.getElementById('closeSide').addEventListener('click',closeSidebar)
function closeSidebar(){ panel.classList.remove('open'); setTimeout(()=>{sidebarSlide.style.display='none'},300) }
document.addEventListener('click',e=>{ if(e.target===sidebarSlide){ closeSidebar() } })
document.getElementById('demoMood').addEventListener('click',()=>{
  document.body.animate([{background:varOr('--bg')},{background:'#faf5ff'},{background:varOr('--bg')}],{duration:1200})
  const all=document.querySelectorAll('.card .thumb')
  all.forEach((t,i)=>t.animate([{transform:'rotate('+(i%2?4:-4)+'deg)'},{transform:'rotate(0)'}],{duration:700,delay:i*80}))
})
function varOr(name){return getComputedStyle(document.documentElement).getPropertyValue(name) || '#fff'}
function saveOrderToStorage(){ try{ localStorage.setItem('bf_order', JSON.stringify(order)) }catch(e){} }
function loadOrderFromStorage(){ try{ const d = JSON.parse(localStorage.getItem('bf_order')||'[]'); if(Array.isArray(d)) order=d; }catch(e){ order=[] } renderOrder() }
window.addEventListener('beforeunload', saveOrderToStorage)
loadOrderFromStorage()
document.getElementById('checkoutForm').addEventListener('submit', e=>{
  e.preventDefault()
  const name=document.getElementById('custName').value.trim()
  const phone=document.getElementById('custPhone').value.trim()
  const address=document.getElementById('custAddress').value.trim()
  if(!name){alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„');return}
  const phoneDigits=phone.replace(/\D/g,'')
  if(!/^07\d{9}$/.test(phoneDigits) && !/^7\d{9}$/.test(phoneDigits) && !/^9647\d{9}$/.test(phoneDigits)){alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¹Ø±Ø§Ù‚ÙŠ ØµØ­ÙŠØ­');return}
  if(address.split(/\s+/).length<2){alert('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø¹Ù†ÙˆØ§Ù† Ù„Ø§ ÙŠÙ‚Ù„ Ø¹Ù† ÙƒÙ„Ù…ØªÙŠÙ†');return}
    const pad=n=>n<10?'0'+n:n,
    fmt=d=>{
      const tz=new Date(d.toLocaleString('en-US',{timeZone:'Asia/Baghdad'}));
      let h=tz.getHours(), ampm=h>=12?'PM':'AM';
      h=h%12||12;
      return `${String(tz.getFullYear()).slice(-2)}/${pad(tz.getMonth()+1)}/${pad(tz.getDate())} - ${pad(h)}:${pad(tz.getMinutes())}:${pad(tz.getSeconds())} ${ampm}`;
    };
  let msgLines=fmt(new Date())+'\n=================================\n'
  msgLines+=`Ø§Ù„Ø§Ø³Ù…: ${name}\nØ§Ù„Ø±Ù‚Ù…: ${phone}\nØ§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}\n---------------------------------------------\n`
  msgLines+='Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„ÙƒÙ…ÙŠØ© - Ø§Ù„Ø³Ø¹Ø± - Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ - Ù…Ù„Ø§Ø­Ø¸Ø©\n'
  msgLines+=order.map(o=>{
  const noteText=o.note?` ${o.note}`:''
  return `${o.name} x${o.qty} - ${o.price.toLocaleString()} IQD - ${(o.price*o.qty).toLocaleString()} IQD - ${noteText}`
  }).join('\n')
  const total=order.reduce((s,o)=>s+o.price*o.qty,0).toLocaleString()
  msgLines+=`\n---------------------------------------------\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total} IQD\n=================================`
  const waNumber='+9647855321655'
  const waUrl=`https://wa.me/${waNumber.replace('+','')}?text=${encodeURIComponent(msgLines)}`
  window.open(waUrl,'_blank')
  checkoutModal.classList.remove('open')
  checkoutModal.setAttribute('aria-hidden','true')
})
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ checkoutModal.classList.remove('open'); noteModal.classList.remove('open') } })
document.querySelectorAll('.card-actions').forEach((el, i) => {
  el.style.setProperty('--delay', `${i * 0.2}s`);
});
const items = document.querySelectorAll('.menu-item');
items.forEach((item, index) => {
  setTimeout(() => {
    item.classList.add('show');
  }, index * 150);
});

</script>
</body>
</html>
